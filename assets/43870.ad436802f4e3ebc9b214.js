(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["43870"],{688318:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return s}}),r("222007");var n=r("884691"),i=r("446674"),o=r("206230"),u=r("91653"),l=r("697218"),a=r("471671"),c=r("315102"),T=r("53708"),s=t=>{let{user:e,size:r,animateOnHover:s=!1,showPending:E=!1,showTryItOut:_=!1,avatarDecorationOverride:d}=t,[S,C]=n.useState(!1),I=(0,i.useStateFromStores)([o.default],()=>o.default.useReducedMotion),A=(0,i.useStateFromStores)([a.default],()=>a.default.isFocused()),f=(0,i.useStateFromStores)([l.default],()=>{var t;return null===(t=l.default.getCurrentUser())||void 0===t?void 0:t.id}),v=(0,i.useStateFromStores)([l.default],()=>{var t;return null===(t=l.default.getUser(null==e?void 0:e.id))||void 0===t?void 0:t.avatarDecoration}),{pendingAvatarDecoration:O}=(0,u.default)({isTryItOut:_}),N=A&&(S||!I&&!s),R=E&&void 0!==O&&void 0!==f&&f===(null==e?void 0:e.id)?O:null!=v?v:null==e?void 0:e.avatarDecoration,g=n.useMemo(()=>(0,c.getAvatarDecorationURL)({avatarDecoration:void 0!==d?d:R,canAnimate:N,size:r}),[R,N,r,d]),P=n.useCallback(()=>C(!0),[]),U=n.useCallback(()=>C(!1),[]);return{avatarPlaceholderSrc:T,avatarDecorationSrc:g,isAvatarDecorationAnimating:N,eventHandlers:{onMouseEnter:P,onMouseLeave:U}}}},853987:function(t,e,r){"use strict";let n,i;r.r(e),r.d(e,{default:function(){return A}}),r("222007"),r("808653"),r("424973");var o=r("917351"),u=r("635058"),l=r("446674"),a=r("913144"),c=r("491232");let T=new Map,s=new Map,E=new Map,_=T,d=s,S=E,C=!1;class I extends l.default.Store{get isFetching(){return C}get error(){return n}get lastFetched(){return i}get categories(){return _}get products(){return d}get productsByItemTypeAndCategory(){return S}getCategory(t){return null!=t?_.get(t):void 0}getProduct(t){return null!=t?d.get(t):void 0}getCategoryForProduct(t){let e=this.getProduct(t);return this.getCategory(null==e?void 0:e.categorySkuId)}getProductsByItemType(t){return null!=t&&u.CollectiblesCategorySkuIdSets.ALL.has(t)?S.get(t):void 0}}I.displayName="CollectiblesCategoryStore";var A=new I(a.default,{COLLECTIBLES_CATEGORIES_FETCH:t=>{C=!0,n=void 0},COLLECTIBLES_CATEGORIES_FETCH_SUCCESS:t=>{0===t.categories.length?(_=T,d=s,S=E):!(0,o.isEqual)([..._.values()],t.categories)&&(_=new Map(t.categories.map(t=>[t.skuId,t])),d=new Map((0,c.getProductsFromCategories)(_).map(t=>[t.skuId,t])),t.categories.forEach(t=>{let e=t.products.reduce((t,e)=>{if(e.items.length>0){var r;let n=e.items[0].type;t[n]=null!==(r=t[n])&&void 0!==r?r:[],t[n].push(e)}return t},{});S.set(t.skuId,e)})),i=Date.now(),C=!1,n=void 0},COLLECTIBLES_CATEGORIES_FETCH_FAILURE:t=>{let{error:e}=t;_=T,d=s,S=E,C=!1,n=e},COLLECTIBLES_PRODUCT_FETCH:t=>{C=!0,n=void 0},COLLECTIBLES_PRODUCT_FETCH_SUCCESS:t=>{d.set(t.product.skuId,t.product),C=!1,n=void 0},COLLECTIBLES_PRODUCT_FETCH_FAILURE:t=>{let{error:e}=t;C=!1,n=e},LOGOUT:t=>{_=T,d=s,S=E,i=void 0,C=!1,n=void 0}})},491232:function(t,e,r){"use strict";r.r(e),r.d(e,{isPremiumCollectiblesProduct:function(){return s},isPremiumCollectiblesPurchase:function(){return E},getFormattedPriceForCollectiblesProduct:function(){return _},extractPriceByPurchaseTypes:function(){return d},isFreeCollectiblesProduct:function(){return S},getProductsFromCategories:function(){return C},getAvatarDecorationsFromPurchases:function(){return f},getAvatarDecorationsFromCategories:function(){return v},getCollectiblesAssetURL:function(){return O},getProfileEffectsFromPurchases:function(){return N},getProfileEffectsFromCategories:function(){return R},groupProfileEffects:function(){return g},isCollectiblesGiftCode:function(){return P}}),r("222007"),r("808653");var n=r("917351"),i=r("635058"),o=r("265586"),u=r("407063"),l=r("153160"),a=r("730297"),c=r("806410"),T=r("49111");let s=t=>(null==t?void 0:t.categorySkuId)===i.CollectiblesCategorySkuId.DISXCORE,E=t=>(null==t?void 0:t.purchaseType)===T.EntitlementTypes.PREMIUM_PURCHASE,_=(t,e)=>{let r=d(t,e?T.PriceSetAssignmentPurchaseTypes.PREMIUM_TIER_2:T.PriceSetAssignmentPurchaseTypes.DEFAULT);return null==r?"":(0,l.formatPrice)(null==r?void 0:r.amount,null==r?void 0:r.currency)},d=(t,e)=>{var r,n,i;let o=null!==(i=t.prices[e])&&void 0!==i?i:null;return null==o?null:null===(n=o.countryPrices)||void 0===n?void 0:null===(r=n.prices)||void 0===r?void 0:r[0]},S=t=>{var e;return(null===(e=d(t,T.PriceSetAssignmentPurchaseTypes.DEFAULT))||void 0===e?void 0:e.amount)===0},C=t=>{let e=(0,n.flatMap)([...t.values()],"products");return(0,n.uniqBy)(e,"storeListingId")},I=(t,e)=>{if(e===o.CollectiblesItemType.AVATAR_DECORATION){let e=(0,n.flatMap)([...t.values()],"items").filter(a.isAvatarDecorationRecord);return(0,n.uniqBy)(e,"id")}if(e===o.CollectiblesItemType.PROFILE_EFFECT){let e=(0,n.flatMap)([...t.values()],"items").filter(c.isProfileEffectRecord);return(0,n.uniqBy)(e,"id")}},A=(t,e)=>{let r=C(t);if(e===o.CollectiblesItemType.AVATAR_DECORATION){let t=(0,n.flatMap)(r,"items").filter(a.isAvatarDecorationRecord);return(0,n.uniqBy)(t,"id")}if(e===o.CollectiblesItemType.PROFILE_EFFECT){let t=(0,n.flatMap)(r,"items").filter(c.isProfileEffectRecord);return(0,n.uniqBy)(t,"id")}},f=t=>I(t,o.CollectiblesItemType.AVATAR_DECORATION),v=t=>A(t,o.CollectiblesItemType.AVATAR_DECORATION),O=(t,e)=>{var r;let{CDN_HOST:n,API_ENDPOINT:i}=window.GLOBAL_ENV,o=(0,u.getBestMediaProxySize)(e.size*(0,u.getDevicePixelRatio)()),l=null!==(r=null==e?void 0:e.format)&&void 0!==r?r:"png";if(null!=n)return"".concat(location.protocol,"//").concat(n,"/app-assets/").concat(T.COLLECTIBLES_APPLICATION_ID,"/").concat(t,".").concat(l,"?size=").concat(o);let a=T.Endpoints.APPLICATION_ASSET(T.COLLECTIBLES_APPLICATION_ID,t,l);return"".concat(location.protocol).concat(i).concat(a,"?size=").concat(o)},N=t=>I(t,o.CollectiblesItemType.PROFILE_EFFECT),R=t=>A(t,o.CollectiblesItemType.PROFILE_EFFECT),g=(t,e)=>{let r=N(e),n=R(t).filter(t=>{let{id:e}=t;return!r.some(t=>t.id===e)});return{purchased:r,shopPreviews:n}},P=t=>t.applicationId===T.COLLECTIBLES_APPLICATION_ID,U=(t,e,r)=>(t[e]=r,t);["1146328960951668776","1146328961417224193","1139323093991575696","1139323099687436419","1139323092645183591","1139323093551165533","1139323101881061466","1139323100568244355","1139323101008642101","1139323099251232828","1139323095744790568","1139323096180994169"].reduce(U,{}),["1174460780842856588","1174459546748600481","1174459480348565554","1174459415924064376","1154896005045694555","1144307957425778779","1144308439720394944","1144307629225672846","1144308196723408958","1144046002110738634","1144305233707671573","1144307257807491094","1144056139584127058","1144006094134456352","1144057023726628945","1144003752978829455","1144056631374647458","1144057486203158560","1144048390594908212","1144048977138946230","1144057737475534889","1144049603109470370","1144057249392771145","1144049316009353338","1144049924397334651"].reduce(U,{})},170313:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return E}}),r("794252");var n=r("884691"),i=r("506838"),o=r("265586"),u=r("65597"),l=r("599110"),a=r("853987"),c=r("491232"),T=r("49111"),s=r("646718"),E=t=>{let e=(0,u.default)([a.default],()=>a.default.products);return(0,n.useCallback)(r=>{let{type:n,skuId:u}=r,a=e.get(u);l.default.track(T.AnalyticEvents.PREMIUM_FEATURE_TRY_OUT,{feature_name:(0,i.match)(n).with(o.CollectiblesItemType.AVATAR_DECORATION,()=>s.AnalyticsPremiumFeatureNames.AVATAR_DECORATION).with(o.CollectiblesItemType.PROFILE_EFFECT,()=>s.AnalyticsPremiumFeatureNames.PROFILE_EFFECT).otherwise(()=>void 0),feature_tier:(0,c.isPremiumCollectiblesProduct)(a)?s.AnalyticsPremiumFeatureTiers.FREE:s.AnalyticsPremiumFeatureTiers.PREMIUM_STANDARD,feature_selection:null==a?void 0:a.name,location_stack:t})},[e,t])}},730297:function(t,e,r){"use strict";r.r(e),r.d(e,{isAvatarDecorationRecord:function(){return u},default:function(){return n}});var n,i=r("265586"),o=r("200410");let u=t=>t instanceof n;n=class t extends o.default{static fromServer(e){return new t({...super.fromServer(e),...e})}constructor(t){super(t),this.type=i.CollectiblesItemType.AVATAR_DECORATION,this.asset=t.asset,this.label=t.label}}},200410:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return n}});var n,i=r("666038");n=class t extends i.default{static fromServer(e){let{sku_id:r,...n}=e;return new t({...n,skuId:r})}constructor(t){super(),this.id=t.id,this.skuId=t.skuId}}},806410:function(t,e,r){"use strict";r.r(e),r.d(e,{isProfileEffectRecord:function(){return u},default:function(){return n}});var n,i=r("265586"),o=r("200410");let u=t=>t instanceof n;n=class t extends o.default{static fromServer(e){return new t({...super.fromServer(e),...e})}constructor(t){super(t),this.type=i.CollectiblesItemType.PROFILE_EFFECT}}},91653:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return T}});var n=r("884691"),i=r("65597"),o=r("170313"),u=r("906932"),l=r("790618"),a=r("697218"),c=r("783142"),T=t=>{let{isTryItOut:e,analyticsLocations:r}=t,T=(0,i.default)([a.default],()=>a.default.getCurrentUser()),s=(0,o.default)(r),{pendingAvatar:E,pendingAvatarDecoration:_}=(0,i.useStateFromStoresObject)([l.default],()=>({pendingAvatar:e?l.default.getTryItOutAvatar():l.default.getPendingAvatar(),pendingAvatarDecoration:e?l.default.getTryItOutAvatarDecoration():l.default.getPendingAvatarDecoration()})),d=(0,n.useCallback)(t=>(0,u.setNewPendingAvatar)(t,null==T?void 0:T.avatar),[null==T?void 0:T.avatar]),S=(0,n.useCallback)(t=>{(0,u.setNewPendingAvatarDecoration)(t,null==T?void 0:T.avatarDecoration),null!=t&&s(t)},[null==T?void 0:T.avatarDecoration,s]);return{pendingAvatar:E,pendingAvatarDecoration:_,setPendingAvatar:e?c.setTryItOutAvatar:d,setPendingAvatarDecoration:e?c.setTryItOutAvatarDecoration:S}}},790618:function(t,e,r){"use strict";let n,i,o,u,l,a,c,T,s,E,_,d,S,C;r.r(e),r.d(e,{default:function(){return D}});var I=r("265586"),A=r("446674"),f=r("913144"),v=r("49111");let O=v.FormStates.CLOSED,N={},R=!1;function g(){O=v.FormStates.OPEN,N={}}function P(){O=v.FormStates.CLOSED,N={}}function U(){m(),L(),N={}}function m(){n=void 0,i=void 0,o=void 0,u=void 0}function L(){l=void 0,a=void 0,c=void 0,T=void 0,s=void 0,u=void 0}function F(){_=void 0,d=void 0,S=void 0,C=void 0,E=void 0}class p extends A.default.Store{getFormState(){return O}getErrors(){return N}showNotice(){return void 0!==n||void 0!==l||void 0!==a||void 0!==c||void 0!==T||void 0!==s||void 0!==o||void 0!==u||void 0!==i}getPendingAvatar(){return n}getPendingGlobalName(){return i}getPendingBanner(){return l}getPendingBio(){return a}getPendingPronouns(){return c}getPendingAccentColor(){return T}getPendingThemeColors(){return s}getPendingAvatarDecoration(){return o}getPendingProfileEffectId(){return u}getAllPending(){return{pendingAvatar:n,pendingBanner:l,pendingBio:a,pendingPronouns:c,pendingAccentColor:T,pendingThemeColors:s,pendingAvatarDecoration:o,pendingProfileEffectId:u,pendingGlobalName:i}}getTryItOutThemeColors(){return E}getTryItOutAvatar(){return _}getTryItOutAvatarDecoration(){return d}getTryItOutProfileEffectId(){return S}getTryItOutBanner(){return C}getAllTryItOut(){return{tryItOutThemeColors:E,tryItOutAvatar:_,tryItOutAvatarDecoration:d,tryItOutProfileEffectId:S,tryItOutBanner:C}}getIsDisableSubmit(){return R}}p.displayName="UserSettingsAccountStore";var D=new p(f.default,{USER_SETTINGS_ACCOUNT_INIT:g,USER_SETTINGS_MODAL_INIT:g,USER_SETTINGS_ACCOUNT_SUBMIT_SUCCESS:g,USER_SETTINGS_MODAL_SET_SECTION:function(t){let{section:e}=t;return e===v.UserSettingsSections.ACCOUNT&&g()},USER_SETTINGS_ACCOUNT_CLOSE:P,USER_SETTINGS_ACCOUNT_RESET_AND_CLOSE_FORM:function(){U(),F(),P()},USER_SETTINGS_ACCOUNT_SUBMIT:function(){O=v.FormStates.SUBMITTING,N={}},USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE:function(t){var e;if(O!==v.FormStates.SUBMITTING)return!1;O=v.FormStates.OPEN,N=null!==(e=t.errors)&&void 0!==e?e:{}},USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR:function(t){let{avatar:e}=t;n=e,_=void 0},USER_SETTINGS_ACCOUNT_SET_PENDING_GLOBAL_NAME:function(t){let{globalName:e}=t;i=e},USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR_DECORATION:function(t){let{avatarDecoration:e}=t;o=e},USER_SETTINGS_ACCOUNT_SET_SINGLE_TRY_IT_OUT_COLLECTIBLES_ITEM:function(t){let{item:e}=t;(null==e?void 0:e.type)===I.CollectiblesItemType.PROFILE_EFFECT?(d=null,S=null==e?void 0:e.id):(S=null,d=e)},USER_SETTINGS_ACCOUNT_SET_PENDING_PROFILE_EFFECT_ID:function(t){let{profileEffectId:e}=t;u=e},USER_SETTINGS_ACCOUNT_SET_PENDING_BANNER:function(t){let{banner:e}=t;l=e},USER_SETTINGS_ACCOUNT_SET_PENDING_BIO:function(t){let{bio:e}=t;a=e},USER_SETTINGS_ACCOUNT_SET_PENDING_PRONOUNS:function(t){let{pronouns:e}=t;c=e},USER_SETTINGS_ACCOUNT_SET_PENDING_ACCENT_COLOR:function(t){let{color:e}=t;T=e},USER_SETTINGS_ACCOUNT_SET_PENDING_THEME_COLORS:function(t){let{themeColors:e}=t;s=e},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_AVATAR:function(t){let{avatar:e}=t;_=e},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_AVATAR_DECORATION:function(t){let{avatarDecoration:e}=t;d=e},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_PROFILE_EFFECT_ID:function(t){let{profileEffectId:e}=t;S=e},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_BANNER:function(t){let{banner:e}=t;C=e},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_THEME_COLORS:function(t){let{themeColors:e}=t;E=e},USER_SETTINGS_CLEAR_ERRORS:function(){N={}},USER_SETTINGS_RESET_PENDING_ACCOUNT_CHANGES:m,USER_SETTINGS_RESET_PENDING_PROFILE_CHANGES:L,USER_SETTINGS_RESET_ALL_PENDING:U,USER_SETTINGS_RESET_ALL_TRY_IT_OUT:F,USER_SETTINGS_RESET_PENDING_AVATAR_DECORATION:function(){o=void 0},LOGOUT:function(){n=void 0},USER_SETTINGS_ACCOUNT_SET_DISABLE_SUBMIT:function(t){let{disable:e}=t;R=e}})},635058:function(t,e,r){"use strict";var n,i;r.r(e),r.d(e,{CollectiblesCategorySkuId:function(){return n},CollectiblesCategorySkuIdSets:function(){return o}}),r("222007"),(i=n||(n={})).FANTASY="1144003461608906824",i.ANIME="1144302037593497701",i.BREAKFAST="1144054000099012659",i.DISXCORE="1144058340327047249",i.HALLOWEEN="1157410718711304313",i.FALL="1157406994873991284",i.WINTER="1174459301239197856",i.MONSTERS="1179493515038818325";let o={ALL:new Set(["1144003461608906824","1144054000099012659","1144058340327047249","1144302037593497701","1157406994873991284","1157410718711304313","1174459301239197856","1179493515038818325"])}},265586:function(t,e,r){"use strict";var n,i;r.r(e),r.d(e,{CollectiblesItemType:function(){return n}}),(i=n||(n={}))[i.AVATAR_DECORATION=0]="AVATAR_DECORATION",i[i.PROFILE_EFFECT=1]="PROFILE_EFFECT"}}]);
//# sourceMappingURL=43870.ad436802f4e3ebc9b214.js.map