<!DOCTYPE html><!-- Last Published: Tue Dec 19 2023 07:48:59 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="discordpages.webflow.io" data-wf-page="6102fadda3eb27bb56da0f57" data-wf-site="5f8dd67f8fdd6f51f0b50904">
<!-- Mirrored from discord.com/blog/lessons-from-migrating-a-large-codebase-to-react-16 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 03 Jan 2024 02:33:32 GMT -->
<head><meta charset="utf-8"/><title>Lessons from migrating a large codebase to React 16</title><meta content="" name="description"/><meta content="Lessons from migrating a large codebase to React 16" property="og:title"/><meta content="" property="og:description"/><meta content="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg.png" property="og:image"/><meta content="Lessons from migrating a large codebase to React 16" property="twitter:title"/><meta content="" property="twitter:description"/><meta content="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg.png" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/css/discordpages.7ab087c99.css" rel="stylesheet" type="text/css"/><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/60ae916347747e71167e21cc_favicon.png" rel="shortcut icon" type="image/x-icon"/><link href="../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/5f91fae62cc821206588b837_Frame%20246.png" rel="apple-touch-icon"/><link href="rss.xml" rel="alternate" title="RSS Feed" type="application/rss+xml"/><!-- Localize integration code -->
<script src="../../ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="../../global.localizecdn.com/localize.js"></script>
<script src="../webflow-scripts/head.js"></script>
<style>
  .nav-bar-hack {
  	bottom: 0px !important;
    height: auto !important;
  }
  
  body a.w-webflow-badge {
    display: none !important;
  }
  
  body {
  	text-rendering: optimizeLegibility;
  }
  
  @media screen and (max-width: 476px) {
    .hide-on-mobile {
      display: none;
    }
  }
  
  .hr-style {
  border: 0;
  height: 8px;
  background-color: #F0F0F0;
  margin: 20px 0px;
  }
  
  .BlogBodyQuote {
  grid-column: 2/-1;
  font-size: 24px;
  line-height: 36px;
  padding: 0px 0px 15px 40px;
  font-style: italic;
  margin: 40px 0px 50px 0px;
}

.quote-text {
  width: 100%;
  margin-top: 10px;
}

.quote-icon {
  position: relative;
  top: 16px;
}

footer.quote-footer {
  font-size: 16px;
  margin-top: 20px;
  font-style: normal;
}
</style>

<style>
.language{
    display:flex;
    user-select: none;
}
.language .lang-container {
    position: relative;
}

.language .lang-selector-container {
    display: flex;
    align-items: center;
    cursor: pointer;
}

.language .locale-container{
    display: flex;
    align-items: center;
}

.language .flag {
    width: 24px;
    height: 16px;
    margin-right: 8px;
}

.language .selector-language-name{
    color: #fff;
    font-size: 14px;
    line-height: 18px;
}

.language .arrow-icon{
    padding-left: 8px;
}

.language .lang-dropdown-container {
    z-index: 10;
    bottom: 100%;
    margin-bottom: 8px;
    position: absolute;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 1px 1px rgb(0 0 0 / 10%);
    overflow: hidden;
    display: none;
}

.language .lang-dropdown {
    max-height: 320px;
    min-width: 150px;
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior: contain;
}

.language .dropdown-item{
    padding: 8px;
}

.language .dropdown-clickable{
    cursor: pointer;
}

.language .dropdown-language-name{
    color: #23272a;
    font-size: 14px;
    line-height: 18px;
}

.flag-ru{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4da57001e8f59b8a77_62cb46f39e6ac4c46ce39566_ru.png);
}

.flag-bg{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cdbc0dc0fb5f55e3098f_6257c2a1e7544e303083b2b1_bolg.png);
}
.flag-cs{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4c83827a1284afe239_62cb46f1254305732a01676d_cs.png);
}
.flag-da{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4ad6ee377e0df4cde6_62cb46f16128094022db6768_da.png);
}
.flag-de{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4aa35fe71fedf5e95f_62cb46f1c50496ce73c40d99_de.png);
}
.flag-en-GB {
    content:url("https://assets-global.website-files.com/6257adef93867e50d84d30e2/62d01c2078d11b68a1633276_Rectangle 1 (3).svg");
}
.flag-el{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4ca5700115ec9b8a67_62cb46f17c26b5fe5a53876f_el.png);
}
.flag-en-US{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cdbc488f5f603e7ecd2a_6257bf8b5ba300233705a542_en.png);
}
.flag-en{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cdbc488f5f603e7ecd2a_6257bf8b5ba300233705a542_en.png);
}
.flag-es{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4b7670687b935aaed4_62cb46f14edab1b0029593fc_es-ES.png);
}
.flag-fi{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb48951dec0cce94a2b1_62cb46f1921c0cf82fc59da7_fi.png);
}
.flag-fr{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4a01339d451d474860_62cb46f1544a7ab7c66e9ccb_fr.png);
}
.flag-hi{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb47b3070262fdccd2a6_62cb46f13fcb6e76c05b504e_hi.png);
}
.flag-hr{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4764813ee14c33c45f_62cb46f1aeebe9064763c90c_hr.png);
}
.flag-hu{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb486b18c7334c564b9a_62cb46f19e6ac41dcce39561_hu.png);
}
.flag-it{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb47fcf6b11ce186dd29_62cb46f1bd099a25f8f77ea4_it.png);
}
.flag-ja{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb49fa4234bc13a595aa_62cb46f1e819841940bec47d_ja.png);
}
.flag-ko{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4b6b18c7266d564ba3_62cb46f125430509b9016776_ko.png);
}
.flag-lt{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4bc5fa8c17a80ae4c4_62cb46f14edab152b8959405_lt.png);
}
.flag-nl{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4d6b18c71a53564bac_62cb46f3e00ff80959abff2a_nl.png);
}
.flag-no{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4d29670fb8a9998a06_62cb46f37c26b5e22453877d_no.png);
}
.flag-pl{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4fd9e48ce2224e71b3_62cb46f3c504963019c40db7_pl.png);
}
.flag-pt-BR{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4d41e0514ceaeb0814_62cb46f3d809bc2503e62bec_pt-BR.png);
}
.flag-ro{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4b7b2666d9520e434e_62cb46f36e94d725ce411ab6_ro.png);
}
.flag-sv{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb5036a202f7044eb402_62cb46f49e6ac47674e39567_sv-SE.png);
}
.flag-th{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb502ab71d0c254b8e0c_62cb46f465c529bf26e211a1_th.png);
}
.flag-tr{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4f41e0515a89eb082a_62cb46f4e819848178bec4d1_tr.png);
}
.flag-uk{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4f36a20273d04eb401_62cb46f37c26b54f6a53877f_uk.png);
}
.flag-vi{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4f00801f3750f4834e_62cb46f4e819840d89bec4d2_vi.png);
}
.flag-zh-Hans{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb5010e73af938ef607e_62cb46f49e6ac45f35e39568_zh-CN.png);
}
.flag-zh-TW{
    content:url(../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/6321cb4fd354ea61ac8db41c_62cb46f33fcb6ea5c95b5069_zh-TW.png);
}
</style>

<style>
.btn-wrapper a {
  color: #fff ;
}

/*
strong {
  font-weight: 700!important;
  font-size: 32px!important;
}
*/
</style>

</head><body><div style="background-color:hsla(234.93506493506493, 85.56%, 64.71%, 1.00)" class="header-blue-blog"><div data-w-id="268ebfa3-e656-b800-3b97-3f7bdfa2ec4d" class="blog-navbar"><a href="../blog.html" class="blog-brand-copy w-nav-brand"><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/613b8fc3834b2bd42157bc04_blogwhite.svg" loading="lazy" alt="Discord"/></a><div data-collapse="medium" data-animation="over-right" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-5 w-nav"><div class="container-790 w-container"><nav role="navigation" class="blog-nav w-nav-menu"><div data-delay="100" data-hover="true" class="w-dropdown"><div class="w-dropdown-toggle"><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/635157e8f94a8580bcbb3e32_Shape.svg" loading="lazy" alt="" class="icon mobile"/><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/614275ac3d35134cb2a96b63_down.svg" loading="lazy" alt="" class="icon white"/><div class="blog-nav-item">COLLECTIONS</div></div><nav class="dropdown-list w-dropdown-list"><div class="w-dyn-list"><div role="list" class="w-dyn-items"><div role="listitem" class="w-dyn-item"><a href="../category/community.html" class="dropdown-link w-dropdown-link">Community</a></div><div role="listitem" class="w-dyn-item"><a href="../category/company.html" class="dropdown-link w-dropdown-link">Discord HQ</a></div><div role="listitem" class="w-dyn-item"><a href="../category/engineering.html" class="dropdown-link w-dropdown-link">Engineering &amp; Developers</a></div><div role="listitem" class="w-dyn-item"><a href="../category/how-to-discord.html" class="dropdown-link w-dropdown-link">How to Discord</a></div><div role="listitem" class="w-dyn-item"><a href="../category/safety.html" class="dropdown-link w-dropdown-link">Policy &amp; Safety</a></div><div role="listitem" class="w-dyn-item"><a href="../category/product.html" class="dropdown-link w-dropdown-link">Product &amp; Features</a></div></div></div></nav></div><a href="../blog-featured.html" class="blog-nav-item w-nav-link">Featured</a><a href="../index.html" class="blog-nav-item w-nav-link">Discord.com</a><div class="w-embed"><form action="https://discord.com/blog/search" class="form-search w-form" style="display: flex">
<input type="search" class="text-field w-input" maxlength="256" name="query" placeholder="Search…" id="search" required="">
<input type="submit" value="" class="btn-search w-button">
</form>

<style> 
form.form-search.w-form:focus-within {
    border: 1px solid #fff;
}
</style></div><form action="https://discord.com/search" class="form-search w-form"><input type="search" class="text-field w-input" maxlength="256" name="query" placeholder="Search…" id="search" required=""/><input type="submit" value="" class="btn-search w-button"/></form></nav><div class="w-nav-button"><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/60b6ad79b75c18f025626c71_menuicon.svg" loading="lazy" alt="Menu" class="image-14"/></div></div></div></div></div><div style="background-color:hsla(234.93506493506493, 85.56%, 64.71%, 1.00)" class="blog-home-hero-header"></div><div class="blog-featured-section"><div class="blog-hero-container hero-offset w-dyn-list"><div role="list" class="collection-list w-dyn-items"><div role="listitem" class="collection-item-4 w-dyn-item"><div class="div-block-15"><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg.png" loading="lazy" alt="" sizes="(max-width: 767px) 92vw, (max-width: 991px) 90vw, (max-width: 1279px) 91vw, (max-width: 1919px) 92vw, 1368px" srcset="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg-p-500.png 500w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg-p-800.png 800w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg-p-1080.png 1080w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg-p-1600.png 1600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg.png 2000w" class="image-19"/></div><div class="blog-hero-heading-section"><a href="../category/engineering.html" class="blog-hero-category">Engineering &amp; Developers</a><a href="lessons-from-migrating-a-large-codebase-to-react-16.html" aria-current="page" class="blog-hero-heading w--current">Lessons from migrating a large codebase to React 16</a></div></div></div></div></div><div class="blog-post-container new"><div class="column-wrapper w-row"><div class="column-3 w-col w-col-2 w-col-stack"><div class="the-author-section"><img alt="" loading="lazy" width="72" src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6124087b6c370652428dbd55_0_9H5DB1Bb-8uO3aLh.png" class="image-22"/><div><div class="blog-post-author">Michael Greer</div><div class="blog-post-author-name">October 4, 2017</div></div></div><div class="tag-section w-condition-invisible"><div class="divider-bar-copy"></div><div class="tags-sections-head">Tags</div><div class="collection-list-wrapper-2 w-dyn-list"><div class="empty-state w-dyn-empty"></div></div></div></div><div class="column-4 w-col w-col-8 w-col-stack"><div id="heading-1" class="rich-wrapper"><div class="blog-post-content w-richtext"><p>Facebook released a rewrite of a large portion of React last week. React 16 has been much anticipated, and the new Fiber rendering pipeline allows for a lot of performance improvements. While the React team has diligently deprecated methods and packages throughout the last version, warning us strongly in console statements to upgrade, the actual final migration is not trivial for larger codebases. We at Discord just launched our React 16 based app and wanted to share our experience and some tips we learned along the way.</p><h3>Why do it?</h3><p>The architectural direction of Fiber looks like it could eventually be a much smoother user experience for both DOM and Native renderers by chunking up the render and prioritizing quicker bits first. Right now, it isn’t clear that the advantages are significant (for one, asynchronous rendering is not enabled yet), but the changes pave the path for such gains in the future.</p><p>You are going to need to upgrade eventually. React is still in motion, and to stay behind will surely leave you fixing against bugs long abandoned by the 16+ community. Also, the new ErrorBoundary is a great addition. <a href="https://github.com/facebook/react/issues/10294" target="_blank">There are a lot of changes,</a> and you will need to adapt.</p><h3>The level of pain</h3><p>Like all migrations, the level of pain will be directly correlated to how recent most of your codebase is. Facebook has done a good job of deprecating and warning for the last few months, but not all libraries are well-maintained and if you depend on or have forked a great many ancient ones, you will be in for a bit of a slog.</p><figure class="w-richtext-align-center"><div><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123eddc5681400eca359839_1_gwU96P9hSQ2nSsyHCmxzJw.png" alt=""/></div></figure><p>It is also up to you and your team whether this is the time to finally move to ES6 classes everywhere, or functional components, or what have you. We strongly recommend doing that <em>after</em> you successfully migrate, so you can understand what is breaking (and ideally covering with tests) before making it beautifully modern. Also, you will want to do this migration as quickly as possible so that you can quickly start testing and then deploying your branch. Having this sit out on a PR for a few weeks will allow master to move past you to the point that you will need to do it again.</p><p>We were starting with a good quality codebase, but one that is big enough to have not migrated off of mixins and React.createClass in the majority of components. We also pin to specific package versions, which means we are stable and confident, but our dependencies can become old and mossy.</p><p>This is where the pain came.</p><h3>Run the codemod</h3><p>First and foremost, you should use the Facebook codemod to move from React.PropTypes to prop-types, and to migrate off of React.createClass. The codemod will make pretty wise choices, moving you to a class if possible (and a PureComponent class if you use the pure mixin), or shimming it with create-react-class.</p><p>Install <a href="https://github.com/facebook/jscodeshift" target="_blank">jscodeshift</a>, and then clone the<a href="https://github.com/reactjs/react-codemod" target="_blank"> react-codemod </a>repo. Then run the following against your codebase:</p><ul role="list"><li>Move to prop-types package:</li></ul><blockquote>jscodeshift -t ./react-codemod/transforms/React-PropTypes-to-prop-types.js /path/to/your/repo</blockquote><ul role="list"><li>Move to Component, PureComponent, or createReactClass:</li></ul><blockquote><br/>jscodeshift -t ./react-codemod/transforms/class.js --mixin-module-name=react-addons-pure-render-mixin --flow=true --pure-component=true --remove-runtime-proptypes=false /path/to/your/repo</blockquote><p>The latter is doing a lot of things, <a href="https://github.com/reactjs/react-codemod" target="_blank">well described on the github page</a>. Most importantly:</p><ul role="list"><li>Moves to an ES6 class if no mixins, and PureComponent if only the pure mixin is present.</li><li>If a class is created, all static are migrated.</li><li>Creates flow annotations from propTypes.</li><li>Migrates method binding from constructor to arrow functions, if you like that sort of thing.</li><li>Skips any component using deprecated APIs like isMounted() etc.</li></ul><p>The codemod found a number of errors in our codebase, which you should note and then go through and correct by hand.</p><p>If you do not like their codemod, or decisions, you should absolutely modify it to your taste or write your own. The codemod is an excellent tool, but not a magic wand. This alone will <em>not</em> migrate you!</p><h3>Search and replace</h3><p>We found that we had to search and replace a number of spots where the the codemod missed it. Spots where we had imported PropTypes from React and called it directly, perhaps. The biggest manual adjustment for us was hunting down all of the isMounted() calls and instead creating a property _isMounted which is set to true inside componentDidMount, and false inside componentWillUnmount (<a href="https://facebook.github.io/react/blog/2015/12/16/ismounted-antipattern.html" target="_blank">although maybe you shouldn’t</a>).</p><h3>Replacing private API usage</h3><p>Surely you don’t use private APIs from inside React? The ones from react/lib/*. If you do, the devs at Facebook have no pity for you: they have bricked you out of those.</p><p>Some of these have been moved to external libraries (the ‘react-addons-’ family of packages) but in some cases, they are just gone.</p><p>Our code has a custom TransitionGroup which depended on the flattenChildren function from inside react/lib. But this function is now gone, as are the related childMapping and mergeChildMappings functions. React devs recommend “inlining” (ie, copy-and-pasting) the required functions, which is what we eventually did. However, we inlined the newer versions of those functions from inside react-transition.</p><p>Discovering this issue, and resolving it, was the first big hurdle, but our app still did not yet run.</p><h3>Upgrading dependencies</h3><p>This one is tedious, and if you are not in a rush to get on 16 might be worth waiting until more libraries test and upgrade themselves. If you wish to help in that process, however, it will help everyone.</p><figure class="w-richtext-align-center"><div><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123eddcdfcedc2fe53e5d2d_1_RnfLbCUW5I_cSpKFFdD9_g.png" alt=""/></div></figure><p>The console will keep warning you about packages that call React.PropTypes or use React.createClass. You will need to upgrade these if possible, replace or work around them if necessary, or fork and fix them if the package seems unmaintained.</p><p>The main issues you are looking to solve for are:</p><ol role="list"><li>Uses React.PropTypes</li><li>Uses React.createClass</li><li>Depends directly on pre-React 16 internals</li></ol><p>Number 3 will lead to an error about ref ownership, and there being more than one React package. Search your yarn.lock for who is depending directly on React &lt; 16 (they should be using a peer dependency!), and upgrade those first.</p><p>But not all package errors are so easily discovered, and herein lies the real pain.</p><p>We ran into an error which took us 2 days to track down to a library, and you may find the same. The console kept telling us that reactFiberChild could not render an element because its ref was undefined. We tore our hair out puzzling through how this could happen, and eventually dug into the React code and saw where the error was being generated. React 16 doesn’t like undefined ref attributes, but null are fine. It took us a while to discover that elements created with a core external library were being set with ref: undefined. Once we forked and fixed it, everything rendered beautifully.</p><h3>Subtle surprises</h3><p>Well, we also found that there were subtle errors here and there throughout the code, again mostly those which required moving through dependent libraries and upgrading or fixing them. Often upgrading a library that is fairly old will alter its rendering, blowing out your carefully crafted CSS overrides. Since most libraries have only fixed their issues once the deprecation warnings showed up in React 15.5+, only their most recent version will work. This is tedious work to discover and fix.</p><p>Moving to ES6 classes for React 16 means that you now need to be fastidious about not altering props. Where you previously got a warning about this, now it fails hard with a “Cannot assign to read only property XXX of object ‘#&lt;XXXX&gt;’”. If you destructure props, and try to alter those properties (or properties on those objects), this will bite you. Instead assign a new object with the updated value:</p><blockquote>const newProp = {...prop, propertyToOverride: overrideValue}</blockquote><p>Also, React 16 will warn about getting a boolean onClick value, which can happen if you do <em>onClick={!disabled &amp;&amp; this.handleOnClick}</em>. Handle the disabled state inside the function to resolve.</p><h3>And then there is React Native</h3><p>We also have an iOS app which shares stores, utils, and some action creators with the web app. Migrating to React 16 was in some ways motivated by our heavy use of React Native, as newer RN releases depend on the alphas of React 16.</p><p>Unfortunately, because we need some special timers for video, we have a fork of React Native and have been back on 0.34. React 16 compatibility only <em>arrived</em> in RN in 0.48.0, so it is time to migrate…</p><p>We found this to be especially painful. The biggest headache was that we used <a href="https://github.com/mjohnston/react-native-webpack-server" target="_blank">React Native Webpack Server</a> to be able to reuse code between our projects, and this project was abandoned a year ago (very hard to constantly shadow the RN codebase). So we needed to look at our build tooling, and began to migrate to <a href="https://github.com/callstack/haul" target="_blank">Haul</a>.</p><p>Haul keeps us in the webpack universe, but was not trivial to setup in an existing codebase. That would perhaps be the subject of another post.</p><p>Also, we have been importing iOS images using the webpack-y require(‘image!image_src’), which was no longer possible in newer versions of RN. This was grueling work, since we had to move the image assets and change how we accessed them (by importing the images directly and referencing the import). Even after writing a codemod, this was mostly manual.</p><p>The rest of the React Native migration was achieved by making a list of breaking changes from all of the intermediate RN change logs, and going through them one by one. For instance, the behavior of flex styling was (properly) changed, and as a result our usage had to be adjusted throughout the app. This was painstaking, but the most efficient path.</p><p>You will also find many classes have been deprecated. For now, we suggest you use the shim <a href="https://github.com/facebookarchive/react-native-custom-components" target="_blank">react-native-deprecated-custom-components</a>. You may need the latest commit, since they only recently updated it for React 16.</p><h3>Take advantage of new features</h3><p>The best bit for us was the new <a href="https://facebook.github.io/react/blog/2017/07/26/error-handling-in-react-16.html" target="_blank">ErrorBoundary</a>. Since React 16 now aborts the render tree on an uncaught error (which is a good thing), you’ll want to put something to render to the user when this happens. Additionally, the boundaries provide a great opportunity to have a central location for logging information-rich errors with both stack and component traces.</p><h3>It runs!</h3><p>So now it renders, and your user experience is full of wonder and delight. No? We found it to be no faster than React 15, but expect this to change as we and the core devs pursue the advantages inherent in the new architecture.</p><p>The biggest advantage, like most tech debt payments, will come down the road. Our code has now been forcibly brought up to date, and this allowed us to normalize much of the code style <em>en passant</em> while reconsidering some of the core tooling for immediate or subsequent modernization. Performance is a bonus.</p><p><em>We are hiring, so</em><a href="https://discordapp.com/jobs" target="_blank"><em> come join us</em></a><em> if this type of stuff tickles your fancy.</em></p></div></div><div class="btn-wrapper w-condition-invisible"><a href="#" class="btn-blog w-dyn-bind-empty w-button"></a></div><div id="heading-2" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-3" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-4" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-5" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-6" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-7" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-8" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-9" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div><div id="heading-10" class="rich-wrapper"><div class="blog-post-content w-dyn-bind-empty w-richtext"></div></div></div><div class="column-desctop w-condition-invisible w-col w-col-2 w-col-stack"><div class="rich-content-right"><div class="paragraph-medium bot-marg">Contents</div><a href="#heading-1" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-2" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-3" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-4" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-5" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-6" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-7" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-8" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-9" class="title-menu-anchor w-dyn-bind-empty"></a><a href="#heading-10" class="title-menu-anchor w-dyn-bind-empty"></a></div></div></div><div class="divider-bar"></div><div class="blog-column w-row"><div class="w-col w-col-3 w-col-medium-6"><div class="author-title">THE AUTHOR</div></div><div class="w-col w-col-9 w-col-medium-6"><div class="the-author-section footer"><img alt="" loading="lazy" width="47" src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6124087b6c370652428dbd55_0_9H5DB1Bb-8uO3aLh.png" class="blog-post-author-image-footer"/><div><div class="blog-post-author-footer">Michael Greer</div><div class="blog-post-author-desc">Director of Engineering at Discord. Eater of sandwiches. Raiser of boys and cats.</div></div></div></div></div><div class="divider-bar"></div><div><div class="author-title">MORE FROM</div><div class="category-title-footer">Engineering &amp; Developers</div><div class="footer-more-from w-dyn-list"><div role="list" class="featured-small-list w-dyn-items w-row"><div role="listitem" class="collection-item-small blog w-dyn-item w-col w-col-4"><a href="pytest-daemon-10x-local-test-iteration-speed.html" class="link-block-4 w-inline-block"><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1).png" loading="lazy" alt="" sizes="(max-width: 767px) 83vw, (max-width: 991px) 29vw, (max-width: 1439px) 30vw, 434.6625061035156px" srcset="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-500.png 500w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-800.png 800w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-1080.png 1080w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-1600.png 1600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-2000.png 2000w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-2600.png 2600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1)-p-3200.png 3200w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6555194328bacbf541b78da4_Engineering%20-%202%20(1).png 3600w" class="blog-featured-small-image"/></a><a href="../category/engineering.html" class="blog-hero-category">Engineering &amp; Developers</a><a href="pytest-daemon-10x-local-test-iteration-speed.html" class="link-block-20 w-inline-block"><div class="blog-featured-title-small">pytest daemon: 10X Local Test Iteration Speed</div></a></div><div role="listitem" class="collection-item-small blog w-dyn-item w-col w-col-4"><a href="ddevs-celebrates-250k-members.html" class="link-block-4 w-inline-block"><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader.png" loading="lazy" alt="" sizes="(max-width: 767px) 83vw, (max-width: 991px) 29vw, (max-width: 1439px) 30vw, 434.6625061035156px" srcset="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader-p-500.png 500w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader-p-800.png 800w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader-p-1080.png 1080w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader-p-1600.png 1600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/65690639d911b0d8f5dc758e_DDevs_250k_blogheader.png 1800w" class="blog-featured-small-image"/></a><a href="../category/engineering.html" class="blog-hero-category">Engineering &amp; Developers</a><a href="ddevs-celebrates-250k-members.html" class="link-block-20 w-inline-block"><div class="blog-featured-title-small">The DDevs Server Celebrates 250k Members!</div></a></div><div role="listitem" class="collection-item-small blog w-dyn-item w-col w-col-4"><a href="authentication-outage.html" class="link-block-4 w-inline-block"><img src="../../assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203.png" loading="lazy" alt="" sizes="(max-width: 767px) 83vw, (max-width: 991px) 29vw, (max-width: 1439px) 30vw, 434.6625061035156px" srcset="https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-500.png 500w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-800.png 800w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-1080.png 1080w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-1600.png 1600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-2000.png 2000w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-2600.png 2600w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203-p-3200.png 3200w, https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/63178bf5d9f1714116f6a66d_Resources%20%26%20Education%20-%203.png 3600w" class="blog-featured-small-image"/></a><a href="../category/engineering.html" class="blog-hero-category">Engineering &amp; Developers</a><a href="authentication-outage.html" class="link-block-20 w-inline-block"><div class="blog-featured-title-small">25% or 6 to 4: The 11/6/23 Authentication Outage</div></a></div></div></div></div></div><div class="footer-black"><div class="container-1180px-2"><div class="w-layout-grid grid-footer"><div id="w-node-_4154f574-5821-8ddb-f6fc-12aae7b6c861-e7b6c85e" class="vertical-flex"><div data-hover="false" data-delay="0" class="dropdown-3 w-dropdown"><div class="dropdown-toggle w-dropdown-toggle"><img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/6257bee91e6309a5a6f6b994_arrow.svg" loading="lazy" alt="" class="arrow"/><div>English, USA</div></div><nav class="dropdown-list-5 w-dropdown-list"><a href="#" class="dropdown-link-2 w-dropdown-link">български</a><a href="#" class="dropdown-link-2 czech w-dropdown-link">Čeština</a><a href="#" class="dropdown-link-2 dansk w-dropdown-link">Dansk</a><a href="#" class="dropdown-link-2 deutsch w-dropdown-link">Deutsch</a><a href="#" class="dropdown-link-2 greek w-dropdown-link">Ελληνικά</a><a href="#" class="dropdown-link-2 english w-dropdown-link">English, USA</a><a href="#" class="dropdown-link-2 spanish w-dropdown-link">Español</a><a href="#" class="dropdown-link-2 suomi w-dropdown-link">Suomi</a><a href="#" class="dropdown-link-2 french w-dropdown-link">Français</a><a href="#" class="dropdown-link-2 hindi w-dropdown-link">हिंदी</a><a href="#" class="dropdown-link-2 hrvatski w-dropdown-link">Hrvatski</a><a href="#" class="dropdown-link-2 magyar w-dropdown-link">Magyar</a><a href="#" class="dropdown-link-2 italiano w-dropdown-link">Italiano</a><a href="#" class="dropdown-link-2 japanese w-dropdown-link">日本語</a><a href="#" class="dropdown-link-2 korean w-dropdown-link">한국어</a><a href="#" class="dropdown-link-2 lithuanian w-dropdown-link">Lietuviškai</a><a href="#" class="dropdown-link-2 nederlands w-dropdown-link">Nederlands</a><a href="#" class="dropdown-link-2 norwegian w-dropdown-link">Norwegian</a><a href="#" class="dropdown-link-2 polski w-dropdown-link">Polski</a><a href="#" class="dropdown-link-2 brazilian-portuguese w-dropdown-link">Português do Brasil</a><a href="#" class="dropdown-link-2 romania w-dropdown-link">Română</a><a href="#" class="dropdown-link-2 ru w-dropdown-link">Русский</a><a href="#" class="dropdown-link-2 svenska w-dropdown-link">Svenska</a><a href="#" class="dropdown-link-2 thai w-dropdown-link">ไทย</a><a href="#" class="dropdown-link-2 turkey w-dropdown-link">Türkçe</a><a href="#" class="dropdown-link-2 ua w-dropdown-link">Українська</a><a href="#" class="dropdown-link-2 vietnamese w-dropdown-link">Tiếng Việt</a><a href="#" class="dropdown-link-2 chinese1 w-dropdown-link">中文</a><a href="#" class="dropdown-link-2 chinese w-dropdown-link">繁體中文</a></nav></div><div class="language"><div class="lang-container"><div id="locale-dropdown" class="lang-dropdown-container"><div class="lang-dropdown"></div></div><div class="lang-selector-container"><div class="locale-container"><img src="https://assets-global.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg" alt="" class="flag"/><div class="selector-language-name"></div></div><img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/6257bee91e6309a5a6f6b994_arrow.svg" loading="lazy" alt="" class="arrow-icon"/></div></div></div><div class="flex-horizontal top-soc"><a data-track="twitter" href="https://twitter.com/discord" target="_blank" class="link-s w-inline-block"><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/65814ad8d9f0b3d89c08fdad_X.svg" loading="lazy" alt="" class="image-49"/></a><a data-track="instagram" href="https://www.instagram.com/discord/" target="_blank" class="link-s w-inline-block"><img src="https://assets-global.website-files.com/6238e97f6441e30a13a52345/6436b5ef634f834a45100cff_svg4.svg" loading="lazy" alt="" class="image-49"/></a><a data-track="facebook" href="https://www.facebook.com/discord/" target="_blank" class="link-s w-inline-block"><img src="https://assets-global.website-files.com/6238e97f6441e30a13a52345/6436b5ef634f836372100cfc_svg5.svg" loading="lazy" alt="" class="image-49"/></a><a data-track="youtube" href="https://www.youtube.com/discord" target="_blank" class="link-s w-inline-block"><img src="https://assets-global.website-files.com/6238e97f6441e30a13a52345/6436b5ef634f83240a100cfe_svg6.svg" loading="lazy" alt="" class="image-49"/></a><a data-track="Tiktok" href="https://www.tiktok.com/@discord" target="_blank" class="link-s w-inline-block"><img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/6374a8122d8df285ddea0e9e_Tiktok (1).svg" loading="lazy" alt="" class="image-49"/></a></div></div><div id="w-node-_4154f574-5821-8ddb-f6fc-12aae7b6c8b6-e7b6c85e"><div class="paragraph-small top-marg font-blue">Product</div><a data-track="download" href="../download.html" class="link-footer">Download</a><a data-track="nitro" href="../nitro.html" class="link-footer">Nitro</a><a data-track="status" href="https://discordstatus.com/" class="link-footer">Status</a><a data-track="status" href="../application-directory.html" class="link-footer">App Directory</a><a data-track="status" href="../mobile.html" class="link-footer">New Mobile Experience</a></div><div id="w-node-_4154f574-5821-8ddb-f6fc-12aae7b6c8bf-e7b6c85e"><div class="paragraph-small top-marg font-blue">Company</div><a data-track="about" href="../company.html" class="link-footer">About</a><a data-track="jobs" href="../careers.html" class="link-footer">Jobs</a><a data-track="branding" href="../branding.html" class="link-footer">Brand</a><a data-track="newsroom" href="../newsroom.html" class="link-footer">Newsroom</a><a data-track="newsroom" href="../fallrelease.html" class="link-footer">Fall Release</a></div><div id="w-node-_4154f574-5821-8ddb-f6fc-12aae7b6c8ca-e7b6c85e"><div class="paragraph-small top-marg font-blue">Resources</div><a data-track="college" href="../college.html" class="link-footer">College</a><a data-track="support" href="https://support.discord.com/hc" class="link-footer">Support</a><a data-track="safety" href="../safety.html" class="link-footer">Safety</a><a data-track="blog" href="../blog.html" class="link-footer">Blog</a><a data-track="feedback" href="https://support.discord.com/hc/en-us/community/topics" class="link-footer">Feedback</a><a data-track="streamkit" href="../streamkit.html" class="link-footer">StreamKit</a><a data-track="creators" href="../creators.html" class="link-footer">Creators</a><a data-track="community" href="../community.html" class="link-footer">Community</a><a data-track="Build" href="../build.html" class="link-footer">Developers</a><a data-track="Build" href="../gaming.html" class="link-footer">Gaming</a><a data-track="store" href="https://discordmerch.com/evergreenfooter" class="link-footer">Official 3rd Party Merch</a></div><div id="w-node-_4154f574-5821-8ddb-f6fc-12aae7b6c8e1-e7b6c85e"><div class="paragraph-small top-marg font-blue">Policies</div><a data-track="terms" href="../terms.html" class="link-footer">Terms</a><a data-track="privacy" href="../privacy.html" class="link-footer">Privacy</a><a data-open-cookie-settings="true" href="#" class="link-footer">Cookie Settings</a><a data-track="guidelines" href="../guidelines.html" class="link-footer">Guidelines</a><a data-track="acknowledgement" href="../acknowledgements.html" class="link-footer">Acknowledgements</a><a data-track="licenses" href="../licenses.html" class="link-footer">Licenses</a><a data-track="moderation" href="../safety-library.html" class="link-footer">Moderation</a></div></div><div class="footer-line-blue"><a data-track="logo" href="../index.html" class="w-inline-block"><img src="https://assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/64cb9ed63bb88490555f45a1_Open Source Projects _ Discord-7.svg" loading="lazy" alt="" class="discord-footer"/></a><a data-track="login_footer" href="../app.html" class="button-white color-blue-right footer-open-discord-button footer-open-discord-button-js w-button">Sign up</a></div></div></div><script src="../../d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c84fb4.js?site=5f8dd67f8fdd6f51f0b50904" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="../../assets-global.website-files.com/5f8dd67f8fdd6f51f0b50904/js/discordpages.790f5716f.js" type="text/javascript"></script><script type="text/javascript" src="../w/loader/loader.js" async defer></script>
<script src="../webflow-scripts/bodyEnd.js" defer async></script>
<script>
  function initDownloadButton() {
    let userAgent = window.navigator.userAgent,
        platform = window.navigator.platform,
        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
        iosPlatforms = ['iPhone', 'iPad', 'iPod'],
        buttonAttributes = null;

    if (iosPlatforms.indexOf(platform) !== -1) {
      buttonAttributes = {
        text: "Download on the App Store",
        href: "https://itunes.apple.com/us/app/discord-chat-for-games/id985746746",
      }
    } else if (macosPlatforms.indexOf(platform) !== -1) {
      buttonAttributes = {
        text: "Download for Mac",
        href: "https://discord.com/api/download?platform=osx",
      }
    } else if (windowsPlatforms.indexOf(platform) !== -1) {
      buttonAttributes = {
        text: "Download for Windows",
        href: "https://discord.com/api/download?platform=win",
      }
    } else if (/Android/.test(userAgent)) {
      buttonAttributes = {
        text: "Download on Google Play",
        href: "https://play.google.com/store/apps/details?id=com.discord",
      }
    } else if (!os && /Linux/.test(platform)) {
      buttonAttributes = {
        text: "Download for Linux",
        href: "https://discord.com/api/download?platform=linux",
      }
    }

	let downloadEl = document.querySelectorAll(".download-button");
    if (downloadEl) {
      downloadEl.forEach(function(el) {
        el.innerText = buttonAttributes.text;
        el.href = buttonAttributes.href;
      });
    }

	let downloadSidebarEl = document.querySelectorAll(".download-sidebar");
    if (downloadSidebarEl) {
      downloadSidebarEl.forEach(function(el) {
        el.href = buttonAttributes.href;
      });
    }
  }
  
  function initLogInOrOpenDiscordButton() {
    let loginButtonText, loginRoute, signUpButtonText, signupRoute;
    let loginIsOpenDiscordButton = true;
    const loginLink = '../login.html';
    const signupLink = '../register.html';
    const openLink = '../channels/%40me.html';
    
    if(window.localStorage.getItem("token") != null) {
      loginButtonText = "Open Discord";
      loginRoute = openLink;
      loginIsOpenDiscordButton = true;
      
      signUpButtonText = "Open Discord";
      signupRoute = openLink;
    } else {
      loginIsOpenDiscordButton = false;
      loginButtonText = "Login";
      signUpButtonText = "Sign up";
      loginRoute = loginLink;
      signupRoute = signupLink;
    }
    
    let loginEl = document.querySelectorAll(".login-button-js");
    let footerEl = document.querySelectorAll(".footer-open-discord-button-js");
    if (loginEl && loginEl.length > 0) {
      loginEl.forEach(function(el) {
        if (!loginIsOpenDiscordButton) {
        	el.classList.add('hide-on-mobile');
        }
        el.innerText = loginButtonText;
      	el.href = loginRoute;
        if (loginIsOpenDiscordButton) {
            el.dataset.trackNav = 'navbar-open-button';
        }
      });
    }
    if (footerEl && footerEl.length > 0) {
      footerEl.forEach(function(el) {
        if (window.innerWidth <= 768) {
        	el.innerText = "Download";
        } else {
        	el.innerText = signUpButtonText;
        }
        el.href = signupRoute;
      });
    }
  }
  
  function initSignUpOrOpenButtons() {
    const signupLink = '../register.html';
    const openLink = '../channels/%40me.html';
    const isLoggedIn = window.localStorage.getItem("token") != null;
    const buttonEl = document.querySelectorAll(".open-or-signup-js");
    
    if (buttonEl && buttonEl.length > 0) {
        buttonEl.forEach(function(el) {
            if (isLoggedIn) {
                el.innerText = 'Open Discord';
                el.href = openLink;
            } else {
                el.innerText = 'Sign up';
                el.href = signupLink;
            }
        });
    }
  }
  
  initSignUpOrOpenButtons();
  initLogInOrOpenDiscordButton();
  initDownloadButton();
</script>


<!-- build:inlineScriptNonceTag -->
  <script>
  <!-- endbuild -->
  </script>
  <!-- section:dataLayer -->
  <script src="../assets/oneTrust/v4/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="04da1d72-0626-4fff-b3c6-150c719cc115"></script>
  <!-- build:inlineScriptNonceTag -->
  <script>
    <!-- endbuild -->
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({ 'allCookiesOK': false });
  </script>
  <!-- endsection -->
  <!-- section:gtm -->
  <!-- build:inlineScriptNonceTag -->
  <script>
  <!-- endbuild -->
    (function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          '../../www.googletagmanager.com/gtm5445.html?id=' + i + dl + '&gtm_auth=GI0g9O-54_SitcgmxQKxlA&gtm_preview=env-2&gtm_cookies_win=x'; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-N7BVC2W');
  </script>
  <!-- endsection --><script type="application/ld+json">
{ 
 "@context": "http://schema.org", 
 "@type": "BlogPosting",
 "headline": "Lessons from migrating a large codebase to React 16",
 "image": "https://assets-global.website-files.com/5f9072399b2640f14d6a2bf4/6123edad853342675a966a92_1_hljDsBz6KOBEYaNgDaicfg.png",
 "publisher": "Discord",
 "url": "https://discord.com/blog/lessons-from-migrating-a-large-codebase-to-react-16",
 "datePublished": "Aug 25, 2021",
 "dateCreated": "Aug 23, 2021",
 "dateModified": "Aug 25, 2021",
 "description": "",
   "author": {
    "@type": "Person",
    "name": "Michael Greer"
  }
 }
</script>

<script nonce="MTY0LDIxMiwyLDE4MSwxNzgsMTU3LDEwMCwxODg=">(function(){var js = "window['__CF$cv$params']={r:'83f1c0674b283fa0',t:'MTcwNDE4NTM5Ni40MDgwMDA='};_cpo=document.createElement('script');_cpo.nonce='MTY0LDIxMiwyLDE4MSwxNzgsMTU3LDEwMCwxODg=',_cpo.src='../cdn-cgi/challenge-platform/h/g/scripts/jsd/74bd6362/main.js',document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = 'MTY0LDIxMiwyLDE4MSwxNzgsMTU3LDEwMCwxODg=';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
<!-- Mirrored from discord.com/blog/lessons-from-migrating-a-large-codebase-to-react-16 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 03 Jan 2024 02:33:36 GMT -->
</html>